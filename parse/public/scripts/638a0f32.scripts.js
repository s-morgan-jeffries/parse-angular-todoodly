"use strict";angular.module("parseAngularTodoodlyApp",["ngCookies","ngSanitize","ngRoute","parseRestApi"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",resolve:{auth:["$q","session","auth",function(a,b,c){return c(!1,"/todos",!0)}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl",resolve:{auth:["$q","session","auth",function(a,b,c){return c(!1,"/todos",!0)}]}}).when("/signin",{templateUrl:"views/signin.html",controller:"SigninCtrl",resolve:{auth:["$q","session","auth",function(a,b,c){return c(!1,"/todos",!0)}]}}).when("/todos",{templateUrl:"views/todos.html",controller:"TodosCtrl",resolve:{auth:["$q","session","auth",function(a,b,c){return c(!0,"/home",!1)}]}}).otherwise({redirectTo:"/home"})}]).config(["$httpProvider",function(a){a.interceptors.push("parseRestApiInterceptor")}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){e&&e.redirectPath?b.path(e.redirectPath):e&&e.replacePath&&(b.path(e.replacePath),b.replace())})}]),angular.module("parseRestApi").constant("parseConfig",{baseUrl:"https://api.parse.com/1",applicationId:"EyFXIlvfGNpyMxSsKX2PuEowMFt8TwnA012jAr8P",restKey:"wHqWaDlBgYAs245Boeqr4wSzaIEtL4L02Myj23Od"}),angular.module("parseAngularTodoodlyApp").factory("session",["parseSession",function(a){return a}]),angular.module("parseAngularTodoodlyApp").factory("Todo",["parseObjectFactory",function(a){var b=a("Todo");return b.prototype.toggleDone=function(){this.isDone=!this.isDone,this.$save()},b}]),angular.module("parseAngularTodoodlyApp").factory("User",["ParseUser","Todo",function(a,b){var c=a;return c.prototype.getTodos=function(){return b.query({where:{user:this.getPointer()},order:"-createdAt"})},c.prototype.addTodo=function(a){var c=new b({content:a,isDone:!1,user:this.getPointer()});return c.setUserPriveleges(this,!0,!0),c.$save(),c},c}]),angular.module("parseAngularTodoodlyApp").directive("siteHeader",function(){return{templateUrl:"views/site-header.html",restrict:"E",replace:!0}}),angular.module("parseAngularTodoodlyApp").directive("siteFooter",function(){return{templateUrl:"views/site-footer.html",restrict:"E",replace:!0}}),angular.module("parseAngularTodoodlyApp").controller("HomeCtrl",function(){}),angular.module("parseAngularTodoodlyApp").controller("AboutCtrl",function(){}),angular.module("parseAngularTodoodlyApp").controller("SignupCtrl",["$scope","$location","User",function(a,b,c){a.signup=function(){c.signUp(this.email,this.password,this.email).$promise.then(function(){b.path("/todos"),b.replace()},function(b){var c=b.data.code;switch(c){case 202:a.signupform.email.$setValidity("available",!1)}})}}]),angular.module("parseAngularTodoodlyApp").controller("SigninCtrl",["$scope","$location","User",function(a,b,c){a.signin=function(){c.signIn(this.email,this.password).$promise.then(function(){b.path("/todos"),b.replace()},function(b){var c=b.data.code;switch(c){case 101:a.signinform.email.$setValidity("registered",!1),a.signinform.password.$setValidity("registered",!1)}})}}]),angular.module("parseAngularTodoodlyApp").controller("SiteHeaderCtrl",["$scope","$location","User","session",function(a,b,c,d){a.isAuthenticated=function(){return d.isAuthenticated},a.signOut=function(){c.signOut(),b.path("/home"),b.replace()}}]),angular.module("parseAngularTodoodlyApp").controller("TodosCtrl",["$scope","session",function(a,b){if(b.isAuthenticated){var c=b.user,d=a.todos=c.getTodos();a.addTodo=function(){var a=c.addTodo(this.addTodoContent);d.unshift(a),this.addTodoContent=""},a.toggleDone=function(a){var b=d[_.indexOf(_.pluck(d,"objectId"),a)];b.toggleDone()},a.deleteTodo=function(a){var b=_.indexOf(_.pluck(d,"objectId"),a),c=d[b];d.splice(b,1),c.$delete()}}}]),angular.module("parseAngularTodoodlyApp").factory("auth",["$q","session",function(a,b){return function(c,d,e){var f={},g=e?"replacePath":"redirectPath";return f[g]=d,!!b.isAuthenticated===c?!0:a.reject(f)}}]),angular.module("parseAngularTodoodlyApp").directive("ngMatches",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(b){var e=a[c.ngMatches];return d.$isEmpty(b)||b===e?(d.$setValidity("matches",!0),b):void d.$setValidity("matches",!1)};d.$parsers.push(e),d.$formatters.push(e)}}}),angular.module("parseAngularTodoodlyApp").directive("ngPristineWhileFocused",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){return d.$setPristine(),a},f=function(){a.$apply(function(){d.$dirty=!0,d.$prisine=!1})};b.on("focus",e),d.$parsers.push(e),b.on("blur",f)}}}),angular.module("parseAngularTodoodlyApp").factory("helloCloud",["parseFunctionFactory",function(a){var b=a("hello",{});return b}]),angular.module("parseAngularTodoodlyApp").factory("userExists",["parseFunctionFactory",function(a){var b=a("userExists",{});return function(a){return b({username:a})}}]),angular.module("parseAngularTodoodlyApp").directive("ngValidOnUpdate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(b){var e=c.ngValidOnUpdate.split(" ");return angular.forEach(e,function(b){var c,e,f=b.split(".");1===f.length?(e=d,c=f[0]):(c=f.pop(),e=a,angular.forEach(f,function(a){e=e[a]})),e.$setValidity(c,!0)}),b};d.$parsers.push(e),d.$formatters.push(e)}}});