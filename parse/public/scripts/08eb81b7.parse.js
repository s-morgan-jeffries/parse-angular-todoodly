"use strict";angular.module("parseRestApi",["ngResource","ngStorage"]);var _identity=function(a){return a},_isFunction=function(a){return"function"==typeof a},_isArray=function(a){return a instanceof Array},_forIn=function(a,b){var c;for(c in a)b(a[c],c,a);return a},_forOwn=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b(a[c],c,a);return a},_find=function(a,b){var c;for(c=0;c<a.length;c++)if(b(a[c]))return a[c]},_findLast=function(a,b){var c;for(c=a.length-1;c>=0;c--)if(b(a[c]))return a[c]},_keys=function(a){var b=[];return _forOwn(a,function(a,c){b.push(c)}),b},_methods=function(a){var b,c=[];for(b in a)_isFunction(a[b])&&c.push(b);return c.sort()},_omit=function(a,b){var c,d={};_isArray(b)||(b=Array.prototype.slice.call(arguments,1));for(c in a)~b.indexOf(c)||(d[c]=a[c]);return d},_pick=function(a,b){var c,d={};_isArray(b)||(b=Array.prototype.slice.call(arguments,1));for(c in a)~b.indexOf(c)&&(d[c]=a[c]);return d},_extend=function(a,b){return _forOwn(b,function(b,c){a[c]=b}),a},_defaults=function(a,b){return _forOwn(b,function(b,c){c in a||(a[c]=b)}),a},_forEach=function(a,b){if(_isArray(a))for(var c=0;c<a.length;c++)b(a[c],c,a);else for(var d in a)b(a[d],d,a);return a},_map=function(a,b){var c=[];return _forEach(a,function(a,d){c.push(b(a,d))}),c};angular.module("parseRestApi").factory("parseFunctionUtils",function(){var a;return a={identity:_identity,isFunction:_isFunction,isArray:_isArray,forIn:_forIn,forOwn:_forOwn,find:_find,findLast:_findLast,keys:_keys,methods:_methods,omit:_omit,pick:_pick,extend:_extend,defaults:_defaults,map:_map}}),angular.module("parseRestApi").factory("parseConfig",function(){return{restApiBaseUrl:"https://api.parse.com/1"}}),angular.module("parseRestApi").factory("parseSession",["$sessionStorage",function(a){var b=a;return b}]),angular.module("parseRestApi").factory("parseRestApiInterceptor",["$q","parseSession","parseConfig",function(a,b,c){var d=function(){var a={"X-Parse-Application-Id":c.applicationId,"X-Parse-REST-API-Key":c.restKey};return b.isAuthenticated&&(a["X-Parse-Session-Token"]=b.sessionToken),a},e=RegExp(c.restApiBaseUrl),f=function(a){return e.test(a)};return{request:function(b){return f(b.url)&&(b.headers=b.headers||{},angular.extend(b.headers,d())),b||a.when(b)}}}]),angular.module("parseRestApi").factory("parseResourceFactory",["$resource","parseFunctionUtils",function(a,b){var c=b;return function(b,d,e){var f;return e=e||{},e.query={method:"GET",isArray:!0,transformResponse:function(a){return a=JSON.parse(a).results,a?c.map(a,function(a){return new f(a)}):[]}},e.create={method:"POST"},e.update={method:"PUT"},f=a(b,d,e),f.save=function(){var a=f.create,b=f.update,d=["createdAt","updatedAt","sessionToken","emailVerified"];delete f.create,delete f.update,delete f.prototype.$create,delete f.prototype.$update;var e=function(a){return a instanceof f},g=function(a){return"object"==typeof a&&!e(a)};return function(){var h,i,j,k,l,m,n,o,p,q;return h=Array.prototype.slice.call(arguments,0),i=c.find(h,g)||{},i=c.omit(i,d),j=c.find(h,e)||new f(i),k=c.omit(c.pick(j,c.keys(j)),c.methods(j)),l=c.extend(k,i),m=c.findLast(h,angular.isFunction)||angular.noop,n=c.find(h,angular.isFunction)||angular.noop,o=function(a,b){c.defaults(a,l),n(a,b)},q=j.isNew()?a:b,m=m===n?angular.noop:m,p=function(a){c.extend(j,k),m(a)},angular.forEach(d,function(a){delete j[a]}),q.call(this,i,j,o,p)}}(),f}}]),angular.module("parseRestApi").factory("parseAbstractObjectFactory",["parseResourceFactory",function(a){return function(b,c,d,e){var f=a(c,d,e);return f.prototype.isNew=function(){return!this.objectId},f.prototype.getPointer=function(){return{__type:"Pointer",className:b,objectId:this.objectId}},f.prototype.setUserPriveleges=function(a,b,c){this.ACL=this.ACL||{},this.ACL[a.objectId]={read:b,write:c}},f}}]);var def1,def2;angular.module("parseRestApi").factory("parseObjectFactory",["parseAbstractObjectFactory","parseConfig","parseFunctionUtils",function(a,b,c){var d=c;return function(c,e,f){var g,h=b.restApiBaseUrl+"/classes/"+c+"/:objectId";return f=f||{},e=d.extend(e||{},{objectId:"@objectId"}),g=a(c,h,e,f)}}]),angular.module("parseRestApi").factory("ParseUser",["parseAbstractObjectFactory","parseConfig","parseSession",function(a,b,c){var d=b.restApiBaseUrl+"/:root/:objectId",e={root:"users",objectId:"@objectId"},f=a("_User",d,e);return c.user=c.user&&new f(c.user),c.user||(c.sessionToken=null),Object.defineProperty(c,"userId",{get:function(){return this.user&&this.user.objectId},enumerable:!1,configurable:!1}),Object.defineProperty(c,"isAuthenticated",{get:function(){return!!this.sessionToken},enumerable:!1,configurable:!1}),f.signUp=function(a,b,d){var e=this.save({username:a,password:b,email:d});return e.$promise.then(function(){c.sessionToken=e.sessionToken,delete e.sessionToken}),c.user=e},f.signIn=function(a,b){var d=this.get({root:"login",username:a,password:b});return d.$promise.then(function(){c.sessionToken=d.sessionToken,delete d.sessionToken}),c.user=d},f.signOut=function(){c.sessionToken=c.user=null},f.current=function(){var a=this.get({objectId:"me"});return a.$promise.then(function(){c.sessionToken=a.sessionToken,delete a.sessionToken}),c.user=a},Object.defineProperty(c,"refreshUser",{enumerable:!1,configurable:!1,value:function(){return f.current()}}),f}]),angular.module("parseRestApi").factory("parseRole",["parseResourceFactory",function(){return{}}]),angular.module("parseRestApi").factory("parseFile",["parseResourceFactory",function(){return{}}]),angular.module("parseRestApi").factory("parseCloudFunction",["$resource","parseConfig",function(a,b){var c,d=d=b.restApiBaseUrl+"/functions/:functionName",e={functionName:"@functionName"},f={cloudCall:{method:"POST"}};return c=a(d,e,f),c.prototype={},function(a,b){return b=b||{},b.functionName=a,c.cloudCall(b)}}]),angular.module("parseRestApi").factory("parseInitialize",["parseConfig",function(a){var b,c,d=function(a,e){b=a,c=e,d=function(){console.warn("Parse application already initialized (application ID: "+b+", REST key: "+c+")!")}};return Object.defineProperty(a,"applicationId",{get:function(){return b},enumerable:!0,configurable:!1}),Object.defineProperty(a,"restKey",{get:function(){return c},enumerable:!0,configurable:!1}),function(a,b){d(a,b)}}]);